!function(){function e(e){function t(e){return"checkbox"===e.type?e.checked?(e.parentNode.classList.remove("error"),!0):(e.parentNode.classList.add("error"),!1):""===e.value||void 0===e.value?(e.parentNode.classList.add("error"),!1):(e.parentNode.classList.remove("error"),!0)}this.form=document.getElementById(e.id),this.elements=this.form.elements,this.submit=this.form.getElementsByClassName(e.submit)[0],this.mailer=e.phpScript,this.mailPost=function(){new XMLHttpRequest};for(var o=0;o<this.elements.length;o++)if("submit"!==this.elements[o].type){if("file"===this.elements[o].type){var i=this.elements[o].parentNode;i.getElementsByTagName("label")[0];this.elements[o].addEventListener("change",function(){this.parentNode.getElementsByTagName("span")[0].innerHTML=this.files[0].name,console.log(this.files)})}"text"===this.elements[o].type&&this.elements[o].addEventListener("change",function(){t(this)})}this.onSubmit=function(){var e=this;this.submit.addEventListener("click",function(o){o.preventDefault(),o.stopPropagation();for(var i,n=new XMLHttpRequest,s=0;s<e.elements.length;s++)if("submit"!==e.elements[s].type){if("checkbox"===e.elements[s].type){if(t(e.elements[s]))continue;return t(e.elements[s]),!1}if("text"===e.elements[s].type||"tel"===e.elements[s].type){if(t(e.elements[s]))continue;return t(e.elements[s]),!1}}i=new FormData(e.form),n.open("POST",e.mailer),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){for(var t=0;t<e.elements.length;t++)"text"!==e.elements[t].type&&"tel"!==e.elements[t].type||(e.elements[t].value="");alert("Ваше сообщение отправлено!")}},n.send(i)})},this.onSubmit()}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("form_phone");new Inputmask("+7(999)999-99-99").mask(t);new e({id:"top_form",submit:"form-box__submit",phpScript:"script/mailer.php"})})}(),function(){document.addEventListener("DOMContentLoaded",function(){function e(e){var t=this;this.wrapper=e.wrapper,this.img=this.wrapper.getElementsByTagName("img")[0],this.img_src=this.wrapper.getElementsByTagName("img")[0].src,this.getName=function(){},window.addEventListener("resize",function(o){parseInt(window.innerWidth)<=991?t.img.src=e.smallPhoto:t.img.src=t.img_src})}var t=(document.documentElement,document.getElementsByClassName("photo-section-right_top-photo")[0]),o=document.getElementsByClassName("photo-section_bottom-photo")[0],i=document.getElementsByClassName("photo-section_square-photo")[0];if(t){var n=new e({wrapper:t,smallPhoto:"../images/photos/right-col_photo_tablets.jpg"});n.getName()}if(o){var n=new e({wrapper:o,smallPhoto:"../images/photos/hall_tablets.jpg"});n.getName()}if(i){var n=new e({wrapper:i,smallPhoto:"../images/photos/photo-1_tablets.jpg"});n.getName()}})}(),function(){function e(e){this.modal=document.getElementById(e.modal),this.wrapper=document.getElementById(e.wrapper),this.photoBox=this.modal.firstElementChild,this.imgBig=document.createElement("img"),this.img=this.wrapper.getElementsByTagName("img"),this.closeButton=document.getElementsByClassName("close_button")[0],this.coord=function(){var e={};return e.body=document.body,e.docEl=document.documentElement,e.scrollTop=window.pageYOffset||docEl.scrollTop||e.body.scrollTop,e.clientHeight=e.docEl.clientHeight||e.body.clientHeight,e.clientWidth=e.docEl.clientWidth||e.bodybody.clientWidth,e},this.modalShow=function(){var e=this.coord();this.modal.classList.add("is-block"),this.modal.classList.add("is-visible"),this.modal.style.height=e.docEl.scrollHeight+"px"},this.modalHide=function(){this.imgBig.style.opacity="0",this.modal.classList.remove("is-block"),this.modal.classList.remove("is-visible"),document.body.style.overflow="auto",n.removeChild(this.imgBig)},this.showPhoto=function(){var e=this;if(void 0!==this.wrapper)for(var t=0;t<this.img.length;t++)this.img[t].addEventListener("click",function(t){t.stopPropagation();e.coord();e.imgBig.src=this.src.slice(0,-10)+".jpg",n.appendChild(e.imgBig),document.body.style.overflow="hidden",e.modalShow(),e.imgBig.addEventListener("load",function(){e.addStyle()}),window.addEventListener("resize",function(t){e.addStyle()})});e.closeButton.addEventListener("click",function(t){t.preventDefault(),e.modalHide()}),window.addEventListener("click",function(t){t.target===i&&e.modalHide()})},this.addStyle=function(){this.closeButton.id="close_button";var e=this.coord();this.imgBig.style.maxWidth=e.clientWidth-40+"px",this.imgBig.style.maxHeight=e.clientHeight-40+"px",this.imgBig.style.top=(e.clientHeight-this.imgBig.height)/2+e.scrollTop+"px",this.imgBig.style.left=(e.clientWidth-this.imgBig.width)/2+"px",this.imgBig.style.opacity="1",this.imgBig.parentElement.appendChild(this.closeButton);var t=this.imgBig.getBoundingClientRect();this.closeButton.classList.add("close_button_show"),this.closeButton.style.top=this.imgBig.offsetTop+10+"px",this.closeButton.style.left=t.x+t.width-this.closeButton.getBoundingClientRect().width-10+"px"},this.showPhotoCoord=function(){}}var t=document.getElementsByClassName("logo-box__logo")[0],o=t.firstElementChild;document.documentElement;setTimeout(function(){t.classList.add("is-visible")},500),Modernizr.svg||(o.src="images/logo.png");var i=(document.getElementById("photos-wrapper"),document.getElementById("modal-wrapper")),n=i.firstElementChild;document.createElement("img");if(document.getElementById("photos-wrapper")){new e({wrapper:"photos-wrapper",modal:"modal-wrapper"}).showPhoto()}}(),function(e){e.extend({browserSelector:function(){var e=navigator.userAgent,t=e.toLowerCase(),o=function(e){return t.indexOf(e)>-1},i="gecko",n="webkit",s="safari",a="opera",r=document.documentElement,l=[!/opera|webtv/i.test(t)&&/msie\s(\d)/.test(t)?"ie ie"+parseFloat(navigator.appVersion.split("MSIE")[1]):o("firefox/2")?i+" ff2":o("firefox/3.5")?i+" ff3 ff3_5":o("firefox/3")?i+" ff3":o("gecko/")?i:o("opera")?a+(/version\/(\d+)/.test(t)?" "+a+RegExp.jQuery1:/opera(\s|\/)(\d+)/.test(t)?" "+a+RegExp.jQuery2:""):o("konqueror")?"konqueror":o("chrome")?n+" chrome":o("iron")?n+" iron":o("applewebkit/")?n+" "+s+(/version\/(\d+)/.test(t)?" "+s+RegExp.jQuery1:""):o("mozilla/")?i:"",o("j2me")?"mobile":o("iphone")?"iphone":o("ipod")?"ipod":o("mac")?"mac":o("darwin")?"mac":o("webtv")?"webtv":o("win")?"win":o("freebsd")?"freebsd":o("x11")||o("linux")?"linux":"","js"];c=l.join(" "),r.className+=" "+c}})}(jQuery),function(e){e.extend({smoothScroll:function(){function e(){var e=!1;if(document.URL.indexOf("google.com/reader/view")>-1&&(e=!0),y.excluded){var t=y.excluded.split(/[,\n] ?/);t.push("mail.google.com");for(var o=t.length;o--;)if(document.URL.indexOf(t[o])>-1){w&&w.disconnect(),c("mousewheel",i),e=!0,b=!0;break}}e&&c("keydown",n),y.keyboardSupport&&!e&&l("keydown",n)}function t(){if(document.body){var t=document.body,o=document.documentElement,i=window.innerHeight,n=t.scrollHeight;if(k=document.compatMode.indexOf("CSS")>=0?o:t,g=t,e(),B=!0,top!=self)E=!0;else if(n>i&&(t.offsetHeight<=i||o.offsetHeight<=i)){var s=!1,a=function(){s||o.scrollHeight==document.height||(s=!0,setTimeout(function(){o.style.height=document.height+"px",s=!1},500))};o.style.height="auto",setTimeout(a,10);var r={attributes:!0,childList:!0,characterData:!1};if(w=new I(a),w.observe(t,r),k.offsetHeight<=i){var l=document.createElement("div");l.style.clear="both",t.appendChild(l)}}if(document.URL.indexOf("mail.google.com")>-1){var c=document.createElement("style");c.innerHTML=".iu { visibility: hidden }",(document.getElementsByTagName("head")[0]||o).appendChild(c)}else if(document.URL.indexOf("www.facebook.com")>-1){var d=document.getElementById("home_stream");d&&(d.style.webkitTransform="translateZ(0)")}y.fixedBackground||b||(t.style.backgroundAttachment="scroll",o.style.backgroundAttachment="scroll")}}function o(e,t,o,i){if(i||(i=1e3),m(t,o),1!=y.accelerationMax){var n=+new Date,s=n-H;if(s<y.accelerationDelta){var a=(1+30/s)/2;a>1&&(a=Math.min(a,y.accelerationMax),t*=a,o*=a)}H=+new Date}if(N.push({x:t,y:o,lastX:t<0?.99:-.99,lastY:o<0?.99:-.99,start:+new Date}),!C){var r=e===document.body,l=function(n){for(var s=+new Date,a=0,c=0,d=0;d<N.length;d++){var m=N[d],u=s-m.start,h=u>=y.animationTime,p=h?1:u/y.animationTime;y.pulseAlgorithm&&(p=f(p));var g=m.x*p-m.lastX>>0,w=m.y*p-m.lastY>>0;a+=g,c+=w,m.lastX+=g,m.lastY+=w,h&&(N.splice(d,1),d--)}r?window.scrollBy(a,c):(a&&(e.scrollLeft+=a),c&&(e.scrollTop+=c)),t||o||(N=[]),N.length?D(l,e,i/y.frameRate+1):C=!1};D(l,e,0),C=!0}}function i(e){B||t();var i=e.target,n=r(i);if(!n||e.defaultPrevented||d(g,"embed")||d(i,"embed")&&/\.pdf/i.test(i.src))return!0;var s=e.wheelDeltaX||0,a=e.wheelDeltaY||0;if(s||a||(a=e.wheelDelta||0),!y.touchpadSupport&&u(a))return!0;Math.abs(s)>1.2&&(s*=y.stepSize/120),Math.abs(a)>1.2&&(a*=y.stepSize/120),o(n,-s,-a),e.preventDefault()}function n(e){var t=e.target,i=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.keyCode!==S.spacebar;if(/input|textarea|select|embed/i.test(t.nodeName)||t.isContentEditable||e.defaultPrevented||i)return!0;if(d(t,"button")&&e.keyCode===S.spacebar)return!0;var n,s=0,a=0,l=r(g),c=l.clientHeight;switch(l==document.body&&(c=window.innerHeight),e.keyCode){case S.up:a=-y.arrowScroll;break;case S.down:a=y.arrowScroll;break;case S.spacebar:n=e.shiftKey?1:-1,a=-n*c*.9;break;case S.pageup:a=.9*-c;break;case S.pagedown:a=.9*c;break;case S.home:a=-l.scrollTop;break;case S.end:var m=l.scrollHeight-l.scrollTop-c;a=m>0?m+10:0;break;case S.left:s=-y.arrowScroll;break;case S.right:s=y.arrowScroll;break;default:return!0}o(l,s,a),e.preventDefault()}function s(e){g=e.target}function a(e,t){for(var o=e.length;o--;)T[_(e[o])]=t;return t}function r(e){var t=[],o=k.scrollHeight;do{var i=T[_(e)];if(i)return a(t,i);if(t.push(e),o===e.scrollHeight){if(!E||k.clientHeight+10<o)return a(t,document.body)}else if(e.clientHeight+10<e.scrollHeight&&(overflow=getComputedStyle(e,"").getPropertyValue("overflow-y"),"scroll"===overflow||"auto"===overflow))return a(t,e)}while(e=e.parentNode)}function l(e,t,o){window.addEventListener(e,t,o||!1)}function c(e,t,o){window.removeEventListener(e,t,o||!1)}function d(e,t){return(e.nodeName||"").toLowerCase()===t.toLowerCase()}function m(e,t){e=e>0?1:-1,t=t>0?1:-1,x.x===e&&x.y===t||(x.x=e,x.y=t,N=[],H=0)}function u(e){if(e){e=Math.abs(e),L.push(e),L.shift(),clearTimeout(M);var t=L[0]==L[1]&&L[1]==L[2],o=h(L[0],120)&&h(L[1],120)&&h(L[2],120);return!(t||o)}}function h(e,t){return Math.floor(e/t)==e/t}function p(e){var t,o,i;return e*=y.pulseScale,e<1?t=e-(1-Math.exp(-e)):(o=Math.exp(-1),e-=1,i=1-Math.exp(-e),t=o+i*(1-o)),t*y.pulseNormalize}function f(e){return e>=1?1:e<=0?0:(1==y.pulseNormalize&&(y.pulseNormalize/=p(1)),p(e))}var g,w,v={frameRate:150,animationTime:700,stepSize:80,pulseAlgorithm:!0,pulseScale:8,pulseNormalize:1,accelerationDelta:20,accelerationMax:1,keyboardSupport:!0,arrowScroll:50,touchpadSupport:!0,fixedBackground:!0,excluded:""},y=v,b=!1,E=!1,x={x:0,y:0},B=!1,k=document.documentElement,L=[120,120,120],S={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},N=[],C=!1,H=+new Date,T={};setInterval(function(){T={}},1e4);var M,_=function(){var e=0;return function(t){return t.uniqueID||(t.uniqueID=e++)}}(),D=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e,t,o){window.setTimeout(e,o||1e3/60)}}(),I=window.MutationObserver||window.WebKitMutationObserver;l("mousedown",s),l("mousewheel",i),l("load",t)}})}(jQuery);