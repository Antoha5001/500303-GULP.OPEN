!function(){function e(e){function t(e){return"checkbox"===e.type?e.checked?(e.parentNode.classList.remove("error"),!0):(e.parentNode.classList.add("error"),!1):""===e.value||void 0===e.value?(e.parentNode.classList.add("error"),!1):(e.parentNode.classList.remove("error"),!0)}this.form=document.getElementById(e.id),this.elements=this.form.elements,this.submit=this.form.getElementsByClassName(e.submit)[0],this.mailer=e.phpScript,this.mailPost=function(){new XMLHttpRequest};for(var n=0;n<this.elements.length;n++)if("submit"!==this.elements[n].type){if("file"===this.elements[n].type){var o=this.elements[n].parentNode;o.getElementsByTagName("label")[0];this.elements[n].addEventListener("change",function(){this.parentNode.getElementsByTagName("span")[0].innerHTML=this.files[0].name,console.log(this.files)})}"text"===this.elements[n].type&&this.elements[n].addEventListener("change",function(){t(this)})}this.onSubmit=function(){var e=this;this.submit.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();for(var o,r=new XMLHttpRequest,i=0;i<e.elements.length;i++)if("submit"!==e.elements[i].type){if("checkbox"===e.elements[i].type){if(t(e.elements[i]))continue;return t(e.elements[i]),!1}if("text"===e.elements[i].type||"tel"===e.elements[i].type){if(t(e.elements[i]))continue;return t(e.elements[i]),!1}}o=new FormData(e.form),r.open("POST",e.mailer),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){for(var t=0;t<e.elements.length;t++)"text"!==e.elements[t].type&&"tel"!==e.elements[t].type||(e.elements[t].value="");alert("Ваше сообщение отправлено!")}},r.send(o)})},this.onSubmit()}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("form_phone");new Inputmask("+7(999)999-99-99").mask(t);new e({id:"top_form",submit:"form-box__submit",phpScript:"script/mailer.php"})})}(),function(){document.addEventListener("DOMContentLoaded",function(){function e(e){var t=this;this.wrapper=e.wrapper,this.img=this.wrapper.getElementsByTagName("img")[0],this.img_src=this.wrapper.getElementsByTagName("img")[0].src,this.getName=function(){},window.addEventListener("resize",function(n){parseInt(window.innerWidth)<=991?t.img.src=e.smallPhoto:t.img.src=t.img_src})}var t=(document.documentElement,document.getElementsByClassName("photo-section-right_top-photo")[0]),n=document.getElementsByClassName("photo-section_bottom-photo")[0],o=document.getElementsByClassName("photo-section_square-photo")[0];if(t){var r=new e({wrapper:t,smallPhoto:"../images/photos/right-col_photo_tablets.jpg"});r.getName()}if(n){var r=new e({wrapper:n,smallPhoto:"../images/photos/hall_tablets.jpg"});r.getName()}if(o){var r=new e({wrapper:o,smallPhoto:"../images/photos/photo-1_tablets.jpg"});r.getName()}})}(),function(){var e=document.getElementsByClassName("logo-box__logo")[0],t=e.firstElementChild;document.documentElement;setTimeout(function(){e.classList.add("is-visible")},500),Modernizr.svg||(t.src="images/logo.png")}(),function(e){e.extend({browserSelector:function(){var e=navigator.userAgent,t=e.toLowerCase(),n=function(e){return t.indexOf(e)>-1},o="gecko",r="webkit",i="safari",a="opera",s=document.documentElement,l=[!/opera|webtv/i.test(t)&&/msie\s(\d)/.test(t)?"ie ie"+parseFloat(navigator.appVersion.split("MSIE")[1]):n("firefox/2")?o+" ff2":n("firefox/3.5")?o+" ff3 ff3_5":n("firefox/3")?o+" ff3":n("gecko/")?o:n("opera")?a+(/version\/(\d+)/.test(t)?" "+a+RegExp.jQuery1:/opera(\s|\/)(\d+)/.test(t)?" "+a+RegExp.jQuery2:""):n("konqueror")?"konqueror":n("chrome")?r+" chrome":n("iron")?r+" iron":n("applewebkit/")?r+" "+i+(/version\/(\d+)/.test(t)?" "+i+RegExp.jQuery1:""):n("mozilla/")?o:"",n("j2me")?"mobile":n("iphone")?"iphone":n("ipod")?"ipod":n("mac")?"mac":n("darwin")?"mac":n("webtv")?"webtv":n("win")?"win":n("freebsd")?"freebsd":n("x11")||n("linux")?"linux":"","js"];c=l.join(" "),s.className+=" "+c}})}(jQuery),function(e){e.extend({smoothScroll:function(){function e(){var e=!1;if(document.URL.indexOf("google.com/reader/view")>-1&&(e=!0),b.excluded){var t=b.excluded.split(/[,\n] ?/);t.push("mail.google.com");for(var n=t.length;n--;)if(document.URL.indexOf(t[n])>-1){w&&w.disconnect(),c("mousewheel",o),e=!0,y=!0;break}}e&&c("keydown",r),b.keyboardSupport&&!e&&l("keydown",r)}function t(){if(document.body){var t=document.body,n=document.documentElement,o=window.innerHeight,r=t.scrollHeight;if(L=document.compatMode.indexOf("CSS")>=0?n:t,g=t,e(),E=!0,top!=self)x=!0;else if(r>o&&(t.offsetHeight<=o||n.offsetHeight<=o)){var i=!1,a=function(){i||n.scrollHeight==document.height||(i=!0,setTimeout(function(){n.style.height=document.height+"px",i=!1},500))};n.style.height="auto",setTimeout(a,10);var s={attributes:!0,childList:!0,characterData:!1};if(w=new R(a),w.observe(t,s),L.offsetHeight<=o){var l=document.createElement("div");l.style.clear="both",t.appendChild(l)}}if(document.URL.indexOf("mail.google.com")>-1){var c=document.createElement("style");c.innerHTML=".iu { visibility: hidden }",(document.getElementsByTagName("head")[0]||n).appendChild(c)}else if(document.URL.indexOf("www.facebook.com")>-1){var m=document.getElementById("home_stream");m&&(m.style.webkitTransform="translateZ(0)")}b.fixedBackground||y||(t.style.backgroundAttachment="scroll",n.style.backgroundAttachment="scroll")}}function n(e,t,n,o){if(o||(o=1e3),u(t,n),1!=b.accelerationMax){var r=+new Date,i=r-C;if(i<b.accelerationDelta){var a=(1+30/i)/2;a>1&&(a=Math.min(a,b.accelerationMax),t*=a,n*=a)}C=+new Date}if(M.push({x:t,y:n,lastX:t<0?.99:-.99,lastY:n<0?.99:-.99,start:+new Date}),!T){var s=e===document.body,l=function(r){for(var i=+new Date,a=0,c=0,m=0;m<M.length;m++){var u=M[m],d=i-u.start,f=d>=b.animationTime,p=f?1:d/b.animationTime;b.pulseAlgorithm&&(p=h(p));var g=u.x*p-u.lastX>>0,w=u.y*p-u.lastY>>0;a+=g,c+=w,u.lastX+=g,u.lastY+=w,f&&(M.splice(m,1),m--)}s?window.scrollBy(a,c):(a&&(e.scrollLeft+=a),c&&(e.scrollTop+=c)),t||n||(M=[]),M.length?B(l,e,o/b.frameRate+1):T=!1};B(l,e,0),T=!0}}function o(e){E||t();var o=e.target,r=s(o);if(!r||e.defaultPrevented||m(g,"embed")||m(o,"embed")&&/\.pdf/i.test(o.src))return!0;var i=e.wheelDeltaX||0,a=e.wheelDeltaY||0;if(i||a||(a=e.wheelDelta||0),!b.touchpadSupport&&d(a))return!0;Math.abs(i)>1.2&&(i*=b.stepSize/120),Math.abs(a)>1.2&&(a*=b.stepSize/120),n(r,-i,-a),e.preventDefault()}function r(e){var t=e.target,o=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.keyCode!==S.spacebar;if(/input|textarea|select|embed/i.test(t.nodeName)||t.isContentEditable||e.defaultPrevented||o)return!0;if(m(t,"button")&&e.keyCode===S.spacebar)return!0;var r,i=0,a=0,l=s(g),c=l.clientHeight;switch(l==document.body&&(c=window.innerHeight),e.keyCode){case S.up:a=-b.arrowScroll;break;case S.down:a=b.arrowScroll;break;case S.spacebar:r=e.shiftKey?1:-1,a=-r*c*.9;break;case S.pageup:a=.9*-c;break;case S.pagedown:a=.9*c;break;case S.home:a=-l.scrollTop;break;case S.end:var u=l.scrollHeight-l.scrollTop-c;a=u>0?u+10:0;break;case S.left:i=-b.arrowScroll;break;case S.right:i=b.arrowScroll;break;default:return!0}n(l,i,a),e.preventDefault()}function i(e){g=e.target}function a(e,t){for(var n=e.length;n--;)D[_(e[n])]=t;return t}function s(e){var t=[],n=L.scrollHeight;do{var o=D[_(e)];if(o)return a(t,o);if(t.push(e),n===e.scrollHeight){if(!x||L.clientHeight+10<n)return a(t,document.body)}else if(e.clientHeight+10<e.scrollHeight&&(overflow=getComputedStyle(e,"").getPropertyValue("overflow-y"),"scroll"===overflow||"auto"===overflow))return a(t,e)}while(e=e.parentNode)}function l(e,t,n){window.addEventListener(e,t,n||!1)}function c(e,t,n){window.removeEventListener(e,t,n||!1)}function m(e,t){return(e.nodeName||"").toLowerCase()===t.toLowerCase()}function u(e,t){e=e>0?1:-1,t=t>0?1:-1,k.x===e&&k.y===t||(k.x=e,k.y=t,M=[],C=0)}function d(e){if(e){e=Math.abs(e),N.push(e),N.shift(),clearTimeout(H);var t=N[0]==N[1]&&N[1]==N[2],n=f(N[0],120)&&f(N[1],120)&&f(N[2],120);return!(t||n)}}function f(e,t){return Math.floor(e/t)==e/t}function p(e){var t,n,o;return e*=b.pulseScale,e<1?t=e-(1-Math.exp(-e)):(n=Math.exp(-1),e-=1,o=1-Math.exp(-e),t=n+o*(1-n)),t*b.pulseNormalize}function h(e){return e>=1?1:e<=0?0:(1==b.pulseNormalize&&(b.pulseNormalize/=p(1)),p(e))}var g,w,v={frameRate:150,animationTime:700,stepSize:80,pulseAlgorithm:!0,pulseScale:8,pulseNormalize:1,accelerationDelta:20,accelerationMax:1,keyboardSupport:!0,arrowScroll:50,touchpadSupport:!0,fixedBackground:!0,excluded:""},b=v,y=!1,x=!1,k={x:0,y:0},E=!1,L=document.documentElement,N=[120,120,120],S={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},M=[],T=!1,C=+new Date,D={};setInterval(function(){D={}},1e4);var H,_=function(){var e=0;return function(t){return t.uniqueID||(t.uniqueID=e++)}}(),B=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e,t,n){window.setTimeout(e,n||1e3/60)}}(),R=window.MutationObserver||window.WebKitMutationObserver;l("mousedown",i),l("mousewheel",o),l("load",t)}})}(jQuery);