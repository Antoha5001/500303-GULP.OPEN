!function(){function e(e){function t(e){return"checkbox"===e.type?e.checked?(e.parentNode.classList.remove("error"),!0):(e.parentNode.classList.add("error"),!1):""===e.value||void 0===e.value?(e.parentNode.classList.add("error"),!1):(e.parentNode.classList.remove("error"),!0)}this.form=document.getElementById(e.id),this.elements=this.form.elements,this.submit=this.form.getElementsByClassName(e.submit)[0],this.mailer=e.phpScript,this.mailPost=function(){new XMLHttpRequest};for(var i=0;i<this.elements.length;i++)if("submit"!==this.elements[i].type){if("file"===this.elements[i].type){var o=this.elements[i].parentNode;o.getElementsByTagName("label")[0];this.elements[i].addEventListener("change",function(){this.parentNode.getElementsByTagName("span")[0].innerHTML=this.files[0].name,console.log(this.files)})}"text"===this.elements[i].type&&this.elements[i].addEventListener("change",function(){t(this)})}this.onSubmit=function(){var e=this;this.submit.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();for(var o,n=new XMLHttpRequest,r=0;r<e.elements.length;r++)if("submit"!==e.elements[r].type){if("checkbox"===e.elements[r].type){if(t(e.elements[r]))continue;return t(e.elements[r]),!1}if("text"===e.elements[r].type||"tel"===e.elements[r].type){if(t(e.elements[r]))continue;return t(e.elements[r]),!1}}o=new FormData(e.form),n.open("POST",e.mailer),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){for(var t=0;t<e.elements.length;t++)"text"!==e.elements[t].type&&"tel"!==e.elements[t].type||(e.elements[t].value="");alert("Ваше сообщение отправлено!")}},n.send(o)})},this.onSubmit()}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("form_phone");new Inputmask("+7(999)999-99-99").mask(t);new e({id:"top_form",submit:"form-box__submit",phpScript:"script/mailer.php"})})}(),function(){function e(e){this.wrapper=e.wrapper,this.img=this.wrapper.getElementsByTagName("img")[0],this.img_src=this.wrapper.getElementsByTagName("img")[0].src,this.getName=function(){},window.matchMedia("(min-width: 1100px)").matches&&console.log(this.img_src)}function t(e){this.modal=document.getElementById(e.modal),this.wrapper=document.getElementById(e.wrapper),this.photoBox=this.modal.firstElementChild,this.imgBig=document.createElement("img"),this.img=this.wrapper.getElementsByTagName("img"),this.closeButton=document.getElementsByClassName("close_button")[0],this.coord=function(){var e={};return e.body=document.body,e.docEl=document.documentElement,e.scrollTop=window.pageYOffset||docEl.scrollTop||e.body.scrollTop,e.clientHeight=e.docEl.clientHeight||e.body.clientHeight,e.clientWidth=e.docEl.clientWidth||e.bodybody.clientWidth,e},this.modalShow=function(){var e=this.coord();this.modal.classList.add("is-block"),this.modal.classList.add("is-visible"),this.modal.style.height=e.docEl.scrollHeight+"px"},this.modalHide=function(){this.imgBig.style.opacity="0",this.modal.classList.remove("is-block"),this.modal.classList.remove("is-visible"),document.body.style.overflow="auto",s.removeChild(this.imgBig)},this.showPhoto=function(){var e=this;if(void 0!==this.wrapper)for(var t=0;t<this.img.length;t++)this.img[t].addEventListener("click",function(t){t.stopPropagation();e.coord();e.imgBig.src=this.src.slice(0,-10)+".jpg",s.appendChild(e.imgBig),document.body.style.overflow="hidden",e.modalShow(),e.imgBig.addEventListener("load",function(){e.addStyle()}),window.addEventListener("resize",function(t){e.addStyle()})});e.closeButton.addEventListener("click",function(t){t.preventDefault(),e.modalHide()}),window.addEventListener("click",function(t){t.target===r&&e.modalHide()})},this.addStyle=function(){this.closeButton.id="close_button";var e=this.coord();this.imgBig.style.maxWidth=e.clientWidth-40+"px",this.imgBig.style.maxHeight=e.clientHeight-40+"px",this.imgBig.style.top=(e.clientHeight-this.imgBig.height)/2+e.scrollTop+"px",this.imgBig.style.left=(e.clientWidth-this.imgBig.width)/2+"px",this.imgBig.style.opacity="1",this.imgBig.parentElement.appendChild(this.closeButton);var t=this.imgBig.getBoundingClientRect();this.closeButton.classList.add("close_button_show"),this.closeButton.style.top=this.imgBig.offsetTop+10+"px",this.closeButton.style.left=t.x+t.width-this.closeButton.getBoundingClientRect().width-10+"px"},this.showPhotoCoord=function(){}}var i=document.getElementsByClassName("photo-section-right_top-photo")[0];if(i){new e({wrapper:i}).getName()}var o=document.getElementsByClassName("logo-box__logo")[0],n=o.firstElementChild;document.documentElement;setTimeout(function(){o.classList.add("is-visible")},500),Modernizr.svg||(n.src="images/logo.png");var r=(document.getElementById("photos-wrapper"),document.getElementById("modal-wrapper")),s=r.firstElementChild;document.createElement("img");if(document.getElementById("photos-wrapper")){new t({wrapper:"photos-wrapper",modal:"modal-wrapper"}).showPhoto()}}(),function(e){e.extend({browserSelector:function(){var e=navigator.userAgent,t=e.toLowerCase(),i=function(e){return t.indexOf(e)>-1},o="gecko",n="webkit",r="safari",s="opera",a=document.documentElement,l=[!/opera|webtv/i.test(t)&&/msie\s(\d)/.test(t)?"ie ie"+parseFloat(navigator.appVersion.split("MSIE")[1]):i("firefox/2")?o+" ff2":i("firefox/3.5")?o+" ff3 ff3_5":i("firefox/3")?o+" ff3":i("gecko/")?o:i("opera")?s+(/version\/(\d+)/.test(t)?" "+s+RegExp.jQuery1:/opera(\s|\/)(\d+)/.test(t)?" "+s+RegExp.jQuery2:""):i("konqueror")?"konqueror":i("chrome")?n+" chrome":i("iron")?n+" iron":i("applewebkit/")?n+" "+r+(/version\/(\d+)/.test(t)?" "+r+RegExp.jQuery1:""):i("mozilla/")?o:"",i("j2me")?"mobile":i("iphone")?"iphone":i("ipod")?"ipod":i("mac")?"mac":i("darwin")?"mac":i("webtv")?"webtv":i("win")?"win":i("freebsd")?"freebsd":i("x11")||i("linux")?"linux":"","js"];c=l.join(" "),a.className+=" "+c}})}(jQuery),function(e){e.extend({smoothScroll:function(){function e(){var e=!1;if(document.URL.indexOf("google.com/reader/view")>-1&&(e=!0),y.excluded){var t=y.excluded.split(/[,\n] ?/);t.push("mail.google.com");for(var i=t.length;i--;)if(document.URL.indexOf(t[i])>-1){w&&w.disconnect(),c("mousewheel",o),e=!0,b=!0;break}}e&&c("keydown",n),y.keyboardSupport&&!e&&l("keydown",n)}function t(){if(document.body){var t=document.body,i=document.documentElement,o=window.innerHeight,n=t.scrollHeight;if(k=document.compatMode.indexOf("CSS")>=0?i:t,g=t,e(),B=!0,top!=self)x=!0;else if(n>o&&(t.offsetHeight<=o||i.offsetHeight<=o)){var r=!1,s=function(){r||i.scrollHeight==document.height||(r=!0,setTimeout(function(){i.style.height=document.height+"px",r=!1},500))};i.style.height="auto",setTimeout(s,10);var a={attributes:!0,childList:!0,characterData:!1};if(w=new R(s),w.observe(t,a),k.offsetHeight<=o){var l=document.createElement("div");l.style.clear="both",t.appendChild(l)}}if(document.URL.indexOf("mail.google.com")>-1){var c=document.createElement("style");c.innerHTML=".iu { visibility: hidden }",(document.getElementsByTagName("head")[0]||i).appendChild(c)}else if(document.URL.indexOf("www.facebook.com")>-1){var d=document.getElementById("home_stream");d&&(d.style.webkitTransform="translateZ(0)")}y.fixedBackground||b||(t.style.backgroundAttachment="scroll",i.style.backgroundAttachment="scroll")}}function i(e,t,i,o){if(o||(o=1e3),m(t,i),1!=y.accelerationMax){var n=+new Date,r=n-T;if(r<y.accelerationDelta){var s=(1+30/r)/2;s>1&&(s=Math.min(s,y.accelerationMax),t*=s,i*=s)}T=+new Date}if(H.push({x:t,y:i,lastX:t<0?.99:-.99,lastY:i<0?.99:-.99,start:+new Date}),!N){var a=e===document.body,l=function(n){for(var r=+new Date,s=0,c=0,d=0;d<H.length;d++){var m=H[d],u=r-m.start,h=u>=y.animationTime,p=h?1:u/y.animationTime;y.pulseAlgorithm&&(p=f(p));var g=m.x*p-m.lastX>>0,w=m.y*p-m.lastY>>0;s+=g,c+=w,m.lastX+=g,m.lastY+=w,h&&(H.splice(d,1),d--)}a?window.scrollBy(s,c):(s&&(e.scrollLeft+=s),c&&(e.scrollTop+=c)),t||i||(H=[]),H.length?_(l,e,o/y.frameRate+1):N=!1};_(l,e,0),N=!0}}function o(e){B||t();var o=e.target,n=a(o);if(!n||e.defaultPrevented||d(g,"embed")||d(o,"embed")&&/\.pdf/i.test(o.src))return!0;var r=e.wheelDeltaX||0,s=e.wheelDeltaY||0;if(r||s||(s=e.wheelDelta||0),!y.touchpadSupport&&u(s))return!0;Math.abs(r)>1.2&&(r*=y.stepSize/120),Math.abs(s)>1.2&&(s*=y.stepSize/120),i(n,-r,-s),e.preventDefault()}function n(e){var t=e.target,o=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.keyCode!==S.spacebar;if(/input|textarea|select|embed/i.test(t.nodeName)||t.isContentEditable||e.defaultPrevented||o)return!0;if(d(t,"button")&&e.keyCode===S.spacebar)return!0;var n,r=0,s=0,l=a(g),c=l.clientHeight;switch(l==document.body&&(c=window.innerHeight),e.keyCode){case S.up:s=-y.arrowScroll;break;case S.down:s=y.arrowScroll;break;case S.spacebar:n=e.shiftKey?1:-1,s=-n*c*.9;break;case S.pageup:s=.9*-c;break;case S.pagedown:s=.9*c;break;case S.home:s=-l.scrollTop;break;case S.end:var m=l.scrollHeight-l.scrollTop-c;s=m>0?m+10:0;break;case S.left:r=-y.arrowScroll;break;case S.right:r=y.arrowScroll;break;default:return!0}i(l,r,s),e.preventDefault()}function r(e){g=e.target}function s(e,t){for(var i=e.length;i--;)C[D(e[i])]=t;return t}function a(e){var t=[],i=k.scrollHeight;do{var o=C[D(e)];if(o)return s(t,o);if(t.push(e),i===e.scrollHeight){if(!x||k.clientHeight+10<i)return s(t,document.body)}else if(e.clientHeight+10<e.scrollHeight&&(overflow=getComputedStyle(e,"").getPropertyValue("overflow-y"),"scroll"===overflow||"auto"===overflow))return s(t,e)}while(e=e.parentNode)}function l(e,t,i){window.addEventListener(e,t,i||!1)}function c(e,t,i){window.removeEventListener(e,t,i||!1)}function d(e,t){return(e.nodeName||"").toLowerCase()===t.toLowerCase()}function m(e,t){e=e>0?1:-1,t=t>0?1:-1,E.x===e&&E.y===t||(E.x=e,E.y=t,H=[],T=0)}function u(e){if(e){e=Math.abs(e),L.push(e),L.shift(),clearTimeout(M);var t=L[0]==L[1]&&L[1]==L[2],i=h(L[0],120)&&h(L[1],120)&&h(L[2],120);return!(t||i)}}function h(e,t){return Math.floor(e/t)==e/t}function p(e){var t,i,o;return e*=y.pulseScale,e<1?t=e-(1-Math.exp(-e)):(i=Math.exp(-1),e-=1,o=1-Math.exp(-e),t=i+o*(1-i)),t*y.pulseNormalize}function f(e){return e>=1?1:e<=0?0:(1==y.pulseNormalize&&(y.pulseNormalize/=p(1)),p(e))}var g,w,v={frameRate:150,animationTime:700,stepSize:80,pulseAlgorithm:!0,pulseScale:8,pulseNormalize:1,accelerationDelta:20,accelerationMax:1,keyboardSupport:!0,arrowScroll:50,touchpadSupport:!0,fixedBackground:!0,excluded:""},y=v,b=!1,x=!1,E={x:0,y:0},B=!1,k=document.documentElement,L=[120,120,120],S={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},H=[],N=!1,T=+new Date,C={};setInterval(function(){C={}},1e4);var M,D=function(){var e=0;return function(t){return t.uniqueID||(t.uniqueID=e++)}}(),_=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e,t,i){window.setTimeout(e,i||1e3/60)}}(),R=window.MutationObserver||window.WebKitMutationObserver;l("mousedown",r),l("mousewheel",o),l("load",t)}})}(jQuery);